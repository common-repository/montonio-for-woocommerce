(()=>{"use strict";const e=window.React,t=window.wp.i18n,o=window.wp.data,{registerPaymentMethod:n}=wc.wcBlocksRegistry,{getSetting:i}=wc.wcSettings,{decodeEntities:a}=wp.htmlEntities,{applyFilters:r}=wp.hooks,{useEffect:c}=wp.element,l=i("wc_montonio_bnpl_data",{}),m=r("wc_montonio_bnpl_block_title",a(l.title||(0,t.__)("Pay Later","montonio-for-woocommerce")),l),p=r("wc_montonio_bnpl_block_description",a(l.description),l),s=()=>{const n=(0,o.useSelect)((e=>{const t=e("wc/store/cart");return t?t.getCartTotals():{}})),i=(0,t.__)("Pay next month","montonio-for-woocommerce"),a=(0,t.__)("Pay in two parts","montonio-for-woocommerce"),r=(0,t.__)("Pay in three parts","montonio-for-woocommerce"),l=(0,t.__)("Add #amount to the cart to make this option available","montonio-for-woocommerce"),m=(0,t.__)("Cart total exceeds maximum limit for this option","montonio-for-woocommerce"),p=(s=n.total_price,_=n,(parseInt(s)/10**_.currency_minor_unit).toFixed(_.currency_minor_unit).replace(".",_.currency_decimal_separator));var s,_;return c((()=>{"undefined"!=typeof Montonio&&Montonio.Checkout&&Montonio.Checkout.Bnpl&&new Montonio.Checkout.Bnpl({targetId:"montonio-bnpl-widget-container",shouldInjectCSS:!0,hideOptionIfNotAvailable:!1,bnplOptions:[{period:"1",title:i,min:30,max:800},{period:"2",title:a,min:75,max:2500},{period:"3",title:r,min:85,max:2500}],addMoreMessage:l,grandTotal:p,overMaxAmountMessage:m}).init()}),[]),(0,e.createElement)("div",{id:"montonio-bnpl-widget-container"})},_=({eventRegistration:t})=>{const{onPaymentSetup:o}=t;return c((()=>{const e=o((()=>({type:"success",meta:{paymentMethodData:{montonio_bnpl_period:document.querySelector('input[name="montonio_bnpl_period"]')?.value||1}}})));return()=>e()}),[o]),(0,e.createElement)(e.Fragment,null,p&&(0,e.createElement)("p",{className:"montonio-payment-block-description"},p),(0,e.createElement)(s,null))},d=()=>(0,e.createElement)("span",null,(0,e.createElement)("img",{src:l.iconurl}));n({name:"wc_montonio_bnpl",label:(0,e.createElement)((()=>(0,e.createElement)("span",null,m,(0,e.createElement)(d,null))),null),content:(0,e.createElement)(_,null),edit:(0,e.createElement)(_,null),canMakePayment:()=>r("wc_montonio_bnpl_block_enabled",!0,l),ariaLabel:m})})();